namespace test;

#test
void test_mem2reg_simple() {
    start("mem2reg_simple");
    
    int x = 1;
    int y = 2;

    if (_optimization_preventer(true)) {
        x = 100;
    } else {
        y = 200;
    }

    assert(x + y == 102);

    x = 1;
    y = 2;

    if (_optimization_preventer(false)) {
        x = 100;
    } else {
        y = 200;
    }

    assert(x + y == 201);

    complete();
}

bool _optimization_preventer(bool val) {
    return val;
}
