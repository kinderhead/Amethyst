namespace test;

#test
void test_entity_exists() {
    start("entity exists");

    @/kill @e[type=wither]
    
    macro_entity_tester(false);
    assert(!@e[type="wither"]);

    @/summon wither

    macro_entity_tester(true);
    assert(@e[type="wither"]);

    @/kill @e[type=wither]

    macro_entity_tester(false);
    assert(!@e[type="wither"]);

    complete();
}

void macro_entity_tester(macro bool x) {
    string type = "wither";

    if (@e[type=type]) {
        assert(x);
    } else {
        assert(!x);
    }
}
