namespace test;

string currentTest = "None";
bool currentTestFailed = false;
int successfulTests = 0;

#load
void run_tests() {
    print("Running tests");

    @/function #test:test

    var total = count_of("test:test");
    print("Tests passed: ", successfulTests, "/", total);
}

void start(string name) {
    currentTest = name;
    currentTestFailed = false;
}

void assert(bool condition) {
    if (condition == 0) currentTestFailed = true;
}

void complete() {
    if (currentTestFailed) {
        print("Test \"", currentTest, "\" failed");
    } else {
        print("Test \"", currentTest, "\" passed");
        successfulTests = successfulTests + 1;
    }
}