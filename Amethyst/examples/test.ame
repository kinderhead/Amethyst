// Rolling test file. Feel free to edit when testing forks. Any changes to this file in a PR will likely be accepted.

namespace example;

// #load
// void main() {
//     int x = 4;
//     print(x);

//     if (x == 4) {
//         x = 3 * x;
//     } else {
//         x = 6 + x;
//     }

//     print(x);

//     for (int i = 0; i < 4; ++i) {
//         x += i;
//     }

//     print(x);

//     amethyst:exit();
// }

struct foo {
    foo() {}

    void bar() {
        print("bar!");

        // This prevents this method from running entirely
        as (@a) {}
    }

    void baz() {
        print("baz!");

        // Another example
        if (1) {}
    }

    void qux() {
        print("qux!");
    }
}


void the() {
    print("the!");

    as (@a) {}
}


#load
void main() {
    foo f = foo();
    f.bar();    // Does not execute
    f.baz();    // Does not execute
    f.qux();    // Prints "qux!"

    as (@a) {
        print("Works fine out here");
    }
    if (1) {
        print("Works fine out here");
    }

    the();  // Works fine for non-struct functions
}
